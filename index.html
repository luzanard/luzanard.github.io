<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Adeptus Mechanicus — Army Builder 10th Edition</title>
  <meta name="description" content="Warhammer 40,000 10th Edition Army Builder for Adeptus Mechanicus">

  <!-- Theme CSS -->
  <link rel="stylesheet" href="theme.css">
</head>
<body>

  <!-- ═══════════════════════════════════════════
       LOADING OVERLAY
  ═══════════════════════════════════════════ -->
  <div id="app-loading">
    <span class="cog-spin">⚙</span>
    <p>Consulting the Omnissiah&hellip;</p>
  </div>

  <!-- ═══════════════════════════════════════════
       APPLICATION SHELL
  ═══════════════════════════════════════════ -->
  <div id="app" class="app-wrapper">

    <!-- ─── HEADER ──────────────────────────────── -->
    <header class="app-header">
      <div class="header-brand">
        <span class="header-cog" aria-hidden="true">⚙</span>
        <div class="header-title-group">
          <h1 class="header-title">Adeptus Mechanicus</h1>
          <span class="header-subtitle">Warhammer 40,000 // 10th Edition // Army Builder</span>
        </div>
      </div>

      <div class="header-right">
        <!-- Points Limit Selector -->
        <select id="points-limit-select" class="select-styled" aria-label="Points limit">
          <!-- Populated by App.js from config.json -->
        </select>

        <!-- Points Display -->
        <div class="points-display" aria-live="polite">
          <span class="points-display__label">Total</span>
          <span class="points-display__value"><span id="points-total">0</span></span>
          <span class="points-display__sep">/</span>
          <span class="points-display__limit"><span id="points-limit">2000</span> pts</span>
        </div>

        <!-- Points Progress Bar -->
        <div id="points-bar" class="points-bar-wrapper" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">
          <div id="points-fill"></div>
        </div>
      </div>
    </header>

    <!-- ─── SIDEBAR ──────────────────────────────── -->
    <aside class="app-sidebar" aria-label="Army configuration">

      <!-- Army Rule -->
      <section class="sidebar-section" aria-labelledby="army-rule-heading">
        <h2 class="sidebar-section-title" id="army-rule-heading">◈ Army Rule</h2>
        <div class="army-rule-block">
          <p class="army-rule-name">Doctrina Imperatives</p>
          <p class="army-rule-desc">At the start of each battle round, select one Doctrina Imperative. All Adeptus Mechanicus units benefit from the chosen doctrine.</p>
        </div>
      </section>

      <!-- Doctrines -->
      <section class="sidebar-section" aria-labelledby="doctrine-heading">
        <h2 class="sidebar-section-title" id="doctrine-heading">⚙ Doctrina Imperatives</h2>
        <div class="doctrine-buttons">
          <!-- Labels & effects come from profiles.json but the UI slots are structural -->
          <button id="doctrine-protector" class="doctrine-btn" aria-pressed="false">
            Protector
          </button>
          <button id="doctrine-conqueror" class="doctrine-btn" aria-pressed="false">
            Conqueror
          </button>
        </div>
        <div id="active-doctrine-display" aria-live="polite">No doctrine active</div>
      </section>

      <!-- Detachment -->
      <section class="sidebar-section" aria-labelledby="detachment-heading">
        <h2 class="sidebar-section-title" id="detachment-heading">▣ Detachment</h2>
        <!-- Populated by Renderer.renderDetachmentSelector() from profiles.json -->
        <div id="detachment-selector" class="detachment-selector-list" role="radiogroup" aria-label="Select detachment">
        </div>
      </section>

      <!-- Detachment Rule -->
      <section class="sidebar-section" aria-labelledby="detachment-rule-heading">
        <h2 class="sidebar-section-title" id="detachment-rule-heading">Detachment Rule</h2>
        <!-- Populated by Renderer.renderDetachmentRule() -->
        <div id="detachment-rule-text" class="detachment-rule-panel">
          <span class="placeholder-text">Select a Detachment to see its special rules.</span>
        </div>
      </section>

      <!-- Forge World -->
      <section class="sidebar-section" id="forge-world-section" aria-labelledby="forge-world-heading">
        <h2 class="sidebar-section-title" id="forge-world-heading">⬡ Forge World</h2>
        <select id="forge-world-select" class="select-styled" aria-label="Select forge world">
          <option value="">— No Forge World —</option>
        </select>
        <!-- Forge world ability injected here by App.js -->
      </section>

    </aside>

    <!-- ─── MAIN CONTENT ─────────────────────────── -->
    <main class="app-main" aria-label="Army roster">

      <!-- Add Unit -->
      <button id="add-unit-btn" class="add-unit-btn" aria-label="Add unit to roster">
        <span class="add-unit-icon">+</span>
        <span class="add-unit-text">
          <span class="add-unit-primary">◉ Requisition Unit</span>
          <span class="add-unit-secondary">Open the Datasheet Registry</span>
        </span>
      </button>

      <!-- Empty state -->
      <div id="roster-empty" aria-live="polite">
        <span class="empty-cog" aria-hidden="true">⚙</span>
        <p>No units deployed. Praise the Omnissiah.</p>
      </div>

      <!-- Roster — populated by Renderer.renderRoster() -->
      <div id="roster-list" aria-label="Deployed units">
      </div>

    </main>

  </div><!-- /.app-wrapper -->

  <!-- ═══════════════════════════════════════════
       UNIT PICKER MODAL
  ═══════════════════════════════════════════ -->
  <div id="unit-picker-modal" class="modal-backdrop" role="dialog" aria-modal="true" aria-labelledby="modal-title">
    <div class="modal-panel">
      <div class="modal-header">
        <div>
          <h2 class="modal-title" id="modal-title">◈ Requisition Unit</h2>
          <p class="modal-subtitle">Datasheet Registry — Adeptus Mechanicus</p>
        </div>
        <button class="modal-close-btn" aria-label="Close unit picker">✕</button>
      </div>
      <!-- Populated by Renderer.renderUnitPickerModal() from units.json -->
      <div id="unit-picker-list" aria-label="Available units">
      </div>
    </div>
  </div>

  <!-- ═══════════════════════════════════════════
       TOAST CONTAINER
  ═══════════════════════════════════════════ -->
  <div id="toast-container" aria-live="polite" aria-atomic="true"></div>

  <!-- ═══════════════════════════════════════════
       SCRIPTS — load order matters
       No build step. Pure ES5-compatible IIFEs.
  ═══════════════════════════════════════════ -->
  <script src="DataLoader.js"></script>
  <script src="StatCalculator.js"></script>
  <script src="StateManager.js"></script>
  <script src="Renderer.js"></script>
  <script src="EventHandlers.js"></script>
  <script src="App.js"></script>

</body>
</html>
